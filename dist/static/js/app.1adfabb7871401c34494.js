webpackJsonp([1],{NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("7+uW"),s=i("Gu7T"),o=i.n(s),r=i("Zx67"),c=i.n(r),l=i("zwoO"),a=i.n(l),h=i("Pf15"),u=i.n(h),f=i("Zrlr"),d=i.n(f),y=i("wxAW"),p=i.n(y),v=[function(t){function e(t,i){d()(this,e);var n=a()(this,(e.__proto__||c()(e)).call(this,t,i,[{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:2,y:0}]));return n.class="I",n}return u()(e,t),e}(function(){function t(e,i,n){d()(this,t),this.x=e,this.y=i,this.points=n}return p()(t,[{key:"rotate",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=0;e<(t+4)%4;e++)this.points=this.points.map(function(t){return{x:t.y,y:-t.x}})}},{key:"getPoints",value:function(){var t=this;return this.points.map(function(e){return{x:e.x+t.x,y:e.y+t.y}})}},{key:"isBlock",value:function(t,e){for(var i=0;i<this.points.length;i++)if(this.points[i].x+2===t&&this.points[i].y+2===e)return!0;return!1}}]),t}())],k=[1440,1260,1140,960,840,660,540,480,420,360,340,320,300,280,260,240,220,200,180,160,140,120,110,100,90,85,80,75,70,65,60],m=function(){return[].concat(o()(Array(10))).map(function(){return{class:"empty",isPlaced:!1}})},x={data:function(){return{field:[],score:0,lines:0,nextBlock:[]}},methods:{init:function(){this.field=[].concat(o()(Array(20))).map(m),this.score=0,this.lines=0,this.nextBlock=[],this.endGame=!1,this.popBlock(),this.moveDown()},getLevel:function(){var t=Math.floor(this.lines/10);return t>=30?30:t},popBlock:function(){for(;this.nextBlock.length<12;)this.nextBlock=this.nextBlock.concat(v.concat(v).sort(function(){return Math.random()-.5}).map(function(t){return new t(5,0)}));this.playerBlock=this.nextBlock.shift(),this.checkCollision()&&(this.endGame=!0)},moveDown:function(){var t=this;if(!this.endGame){this.timer&&clearTimeout(this.timer);var e=!1;this.playerBlock.y++,this.checkCollision()&&(this.playerBlock.y--,this.playerBlock.getPoints().forEach(function(e){t.field[e.y][e.x].isPlaced=!0}),e=!0);for(var i=0,n=[],s=0;s<this.field.length;s++)this.field[s].every(function(t){return t.isPlaced})?i++:n.push(this.field[s]);for(this.lines+=i,this.score+=[0,10,20,30,40][i]*(this.getLevel()+1);n.length<20;)n.unshift(m());this.field=n,e&&this.popBlock(),this.render(),this.timer=setTimeout(this.moveDown,k[this.getLevel()])}},moveHorizon:function(t){if(!this.endGame){var e=t?1:-1;this.playerBlock.x+=e,this.checkCollision(this.playerBlock)&&(this.playerBlock.x-=e),this.render()}},rotate:function(){this.endGame||(this.playerBlock.rotate(1),this.checkCollision(this.playerBlock)&&this.playerBlock.rotate(-1),this.render())},checkCollision:function(){for(var t=this.playerBlock.getPoints(),e=0;e<t.length;e++){var i=this.field[t[e].y];if(!i)return!0;var n=i[t[e].x];if(!n||n.isPlaced)return!0}return!1},render:function(){var t=this,e=this.field.map(function(t){return t.map(function(t){return t.isPlaced||(t.class="empty"),t})});this.playerBlock.getPoints().forEach(function(i){e[i.y][i.x].class=t.playerBlock.class}),this.field=e}}},B={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tetris"},[i("div",{staticClass:"field"},t._l(t.field.slice(2),function(e,n){return i("div",{key:n,staticClass:"line"},t._l(e,function(t,e){return i("div",{key:e,staticClass:"cell",class:[t.class,{placed:t.isPlaced}]})}),0)}),0),t._v(" "),i("div",{staticClass:"results"},[i("div",{staticClass:"lines"},[t._v("\n\t\t\tLines: "+t._s(t.lines)+"\n\t\t\t"),i("hr")]),t._v(" "),i("div",{staticClass:"score"},[t._v("Score: "+t._s(t.score))])])])},staticRenderFns:[]};var C=i("VU/8")(x,B,!1,function(t){i("YPe9")},"data-v-e7502986",null).exports,_=(i("OGwZ"),new n.a({el:"#app",components:{tetris:C}}));document.body.onkeydown=function(t){[27].includes(t.keyCode)?_.$refs.tetris.init():[38,87].includes(t.keyCode)?_.$refs.tetris.rotate():[37,65].includes(t.keyCode)?_.$refs.tetris.moveHorizon(!1):[39,68].includes(t.keyCode)?_.$refs.tetris.moveHorizon(!0):[40,83].includes(t.keyCode)&&_.$refs.tetris.moveDown()},_.$refs.tetris.init()},OGwZ:function(t,e){},YPe9:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.1adfabb7871401c34494.js.map